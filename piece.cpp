#include "piece.h"

#include <exception>

const std::vector<Piece>& GetAllRotations(PieceType type) {
    static const std::vector<std::vector<Piece>> PiecesRotations = {
        // I
        {
            {{0,0,0,0},
             {0,0,0,0},
             {0,0,0,0},
             {1,1,1,1}}, 
            {{1,0,0,0},
             {1,0,0,0},
             {1,0,0,0},
             {1,0,0,0}}, 
        },
        // J
        {
            {{0,0,0,0},
             {0,0,0,0},
             {1,1,1,0},
             {0,0,1,0}}, 
            {{0,0,0,0},
             {0,1,0,0},
             {0,1,0,0},
             {1,1,0,0}}, 
            {{0,0,0,0},
             {0,0,0,0},
             {1,0,0,0},
             {1,1,1,0}}, 
            {{0,0,0,0},
             {1,1,0,0},
             {1,0,0,0},
             {1,0,0,0}}, 
        },
        // L
        {
            {{0,0,0,0},
             {0,0,0,0},
             {1,1,1,0},
             {1,0,0,0}}, 
            {{0,0,0,0},
             {1,1,0,0},
             {0,1,0,0},
             {0,1,0,0}}, 
            {{0,0,0,0},
             {0,0,0,0},
             {0,0,1,0},
             {1,1,1,0}}, 
            {{0,0,0,0},
             {1,0,0,0},
             {1,0,0,0},
             {1,1,0,0}} 
        },
        // S
        {
            {{0,0,0,0},
             {0,0,0,0},
             {0,1,1,0},
             {1,1,0,0}}, 
            {{0,0,0,0},
             {1,0,0,0},
             {1,1,0,0},
             {0,1,0,0}}, 
        },
        // Z
        {
            {{0,0,0,0},
             {0,0,0,0},
             {1,1,0,0},
             {0,1,1,0}}, 
            {{0,0,0,0},
             {0,1,0,0},
             {1,1,0,0},
             {1,0,0,0}}, 
        },
        // T
        {
            {{0,0,0,0},
             {0,0,0,0},
             {1,1,1,0},
             {0,1,0,0}}, 
            {{0,0,0,0},
             {0,1,0,0},
             {1,1,0,0},
             {0,1,0,0}}, 
            {{0,0,0,0},
             {0,0,0,0},
             {0,1,0,0},
             {1,1,1,0}}, 
            {{0,0,0,0},
             {1,0,0,0},
             {1,1,0,0},
             {1,0,0,0}}, 
        },
        // O
        {
            {{0,0,0,0},
             {0,0,0,0},
             {1,1,0,0},
             {1,1,0,0}},
        },
    };
    
    int i = type;
    if (i > 6) {
        throw std::invalid_argument("GetAllRotations(): no such piece type");
    }
    return PiecesRotations[i];
}

Piece CreatePiece(PieceType type){
    return GetAllRotations(type)[0];
}

